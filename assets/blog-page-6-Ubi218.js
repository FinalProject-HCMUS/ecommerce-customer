import{j as e,r,t as a}from"./index-BvcOfChq.js";import{f as B}from"./formatDate-B-vHTpLq.js";import{c as b,z as j,L as p,A as O}from"./App-B3C3fNta.js";import{C as D,u as T}from"./blogs-CARuMB30.js";import{B as L}from"./Breadcrumb-DLKDyx0E.js";import{a as E}from"./Pagination-CJPIJdth.js";import{c as M}from"./common-Cbvgc8aE.js";import{S as z}from"./search-CMG-TTa6.js";import{X as H}from"./x-CoFpf6r6.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=b("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=b("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),q=t=>new DOMParser().parseFromString(t,"text/html").body.textContent||"",F=({post:t,index:n})=>{const l=q(t.content||"");return e.jsxs(j.article,{className:"flex flex-col sm:flex-row bg-gray-100 rounded-[12px] overflow-hidden cursor-pointer hover:shadow-md transition-shadow",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:n*.1},whileHover:{scale:1.01},layout:!0,children:[e.jsx(p,{to:`/blog/${t.id}`,className:"w-full sm:w-36 h-36 flex-shrink-0 bg-gray-200 overflow-hidden",children:t.image?e.jsx("div",{className:"w-full h-full overflow-hidden",children:e.jsx("img",{src:t.image||"/placeholder.svg",alt:t.title,className:"w-full h-full object-cover transition-transform duration-300 hover:scale-110"})}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsxs("svg",{className:"w-12 h-12 text-gray-300",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1",children:[e.jsx("line",{x1:"4",y1:"4",x2:"20",y2:"20"}),e.jsx("line",{x1:"20",y1:"4",x2:"4",y2:"20"})]})})}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow",children:[e.jsx(p,{to:`/blog/${t.id}`,className:"group",children:e.jsx("h2",{className:"text-xl font-medium mb-1 group-hover:text-primary transition-colors",children:t.title})}),e.jsx("p",{className:"text-gray-700 mb-2 line-clamp-3 overflow-hidden",children:l}),e.jsxs("div",{className:"mt-auto flex items-center text-sm text-gray-500",children:[e.jsx(D,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:B(t.createdAt)})]})]})]})},G=({posts:t})=>e.jsx(j.div,{className:"space-y-4 mx-5",layout:!0,children:e.jsx(O,{mode:"wait",children:t&&t.map((n,l)=>e.jsx(F,{post:n,index:l},n.id))})}),{BLOG_PER_PAGE:U}=M,R=()=>{var y,f;const{loading:t,fetchBlogs:n}=T(),[l,v]=r.useState(null),[i,x]=r.useState(""),[d,w]=r.useState(""),[c,N]=r.useState(1),[o,S]=r.useState(["createdAt,desc"]),[h,u]=r.useState(!1);r.useEffect(()=>{const s=setTimeout(()=>{w(i)},300);return()=>clearTimeout(s)},[i]),r.useEffect(()=>{(async()=>{const g=await n(c-1,U,o,d||void 0);g&&v(g)})()},[d,c,o]);const k=s=>{N(s),window.scrollTo({top:0,behavior:"smooth"})},C=s=>{S(s),u(!1)},P=()=>{x("")},m=[{label:a("lbl.newest"),value:["createdAt,desc"]},{label:a("lbl.oldest"),value:["createdAt,asc"]},{label:a("lbl.titleAZ"),value:["title,asc"]},{label:a("lbl.titleZA"),value:["title,desc"]}],A=((y=m.find(s=>JSON.stringify(s.value)===JSON.stringify(o)))==null?void 0:y.label)||m[0].label;return e.jsxs("div",{className:"mx-auto mt-10 px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx(L,{items:[{label:a("breadcrumb.home"),path:"/"},{label:a("breadcrumb.blog"),path:"/blog"}]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-4 mb-8",children:[e.jsxs("div",{className:"relative flex-grow max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(z,{className:"h-10 w-5 text-gray-400"})}),e.jsx("input",{type:"text",value:i,onChange:s=>x(s.target.value),placeholder:a("lbl.searchBlogs"),className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-full bg-white focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent"}),i&&e.jsx("button",{onClick:P,className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(H,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>u(!h),className:"flex items-center space-x-2 px-4 py-2 border border-gray-300 rounded-full bg-white hover:bg-gray-50",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm",children:A}),e.jsx(J,{className:"h-4 w-4"})]}),h&&e.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 z-10",children:e.jsx("div",{className:"py-1",role:"menu",children:m.map(s=>e.jsx("button",{onClick:()=>C(s.value),className:`block px-4 py-2 text-sm w-full text-left ${JSON.stringify(s.value)===JSON.stringify(o)?"bg-gray-100 text-gray-900":"text-gray-700 hover:bg-gray-50"}`,children:s.label},s.label))})})]})]}),e.jsx("main",{children:t?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-pulse text-gray-400",children:a("lbl.loading")})}):((f=l==null?void 0:l.content)==null?void 0:f.length)===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:a("lbl.noResults")}),e.jsx("p",{className:"text-gray-500",children:a("lbl.tryDifferentSearch")})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{posts:l==null?void 0:l.content}),e.jsx(E,{currentPage:c,totalPages:(l==null?void 0:l.totalPages)||0,onPageChange:k})]})})]})};export{R as default};
