import{u as b,b as g,r as w,j as e,l as j}from"./index-CxKmREMg.js";import{u as v}from"./user-BIs3rADr.js";import{d as y,a as s}from"./App-ml3lkzHZ.js";import{s as N,a as o}from"./request-BhcxZV3V.js";import{P as l}from"./PasswordInput-B68mLW2B.js";import{G as q}from"./Button-B8u0i0Tw.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=y("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),z=()=>{const{userInfo:t}=b(r=>r.auth),{changePassword:m,loading:u}=v(),f=g(),[a,c]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[i,h]=w.useState({currentPassword:"",newPassword:"",confirmPassword:""}),d=r=>{const{name:n,value:p}=r.target;c({...a,[n]:p}),i[n]&&h({...i,[n]:""})},P=()=>{let r=!0;return a.currentPassword.trim()||(o(s("error.currentPasswordRequired")),r=!1),a.newPassword.trim()?a.newPassword.length<8&&(o(s("error.passwordLength")),r=!1):(o(s("error.newPasswordRequired")),r=!1),a.confirmPassword.trim()?a.newPassword!==a.confirmPassword&&(o(s("error.passwordMismatch")),r=!1):(o(s("error.confirmPasswordRequired")),r=!1),r},x=async r=>{if(r.preventDefault(),!P()||!(t!=null&&t.id))return;await m(t.id,a)&&(N(s("success.passwordChanged")),f(j()),c({currentPassword:"",newPassword:"",confirmPassword:""}))};return e.jsxs("div",{className:"max-w-md w-full mx-auto my-5",children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx(C,{className:"h-6 w-6 text-blue-600"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:s("lbl.changePassword")})]}),e.jsxs("form",{onSubmit:x,children:[e.jsx(l,{id:"currentPassword",name:"currentPassword",label:s("lbl.currentPassword"),value:a.currentPassword,onChange:d,placeholder:s("placeholder.currentPassword"),required:!0}),e.jsx(l,{id:"newPassword",name:"newPassword",label:s("lbl.newPassword"),value:a.newPassword,onChange:d,placeholder:s("placeholder.newPassword"),required:!0}),e.jsx(l,{id:"confirmPassword",name:"confirmPassword",label:s("lbl.confirmPassword"),value:a.confirmPassword,onChange:d,placeholder:s("placeholder.confirmPassword"),required:!0}),e.jsx("div",{className:"mt-6",children:e.jsx(q,{type:"submit",variant:"primary",size:"md",isLoading:u,className:"w-full rounded-[10px]",children:s("btn.changePassword")})})]})]})};export{z as default};
