import{r as a}from"./index-Cix6GTrn.js";import{c as f}from"./request-9eYOFU4_.js";const h="/orders",y=async r=>(await f.post(`${h}/checkout`,r)).data,k=async r=>{const{keyword:s,status:n,page:c=0,size:u=10,sort:o}=r,e=new URLSearchParams;return s&&e.append("keyword",s),n&&e.append("status",n),e.append("page",c.toString()),e.append("size",u.toString()),o&&o.length>0&&o.forEach(d=>{e.append("sort",d)}),(await f.get(`${h}/search?${e.toString()}`)).data},P=()=>{const[r,s]=a.useState(!1),[n,c]=a.useState(null);return{loading:r,orderResponse:n,performCheckout:async o=>{s(!0);try{const e=await y(o);return e.isSuccess&&e.data&&c(e.data),s(!1),e}catch{s(!1);return}}}},C=r=>{const[s,n]=a.useState(r||{page:0,size:10}),[c,u]=a.useState([]),[o,e]=a.useState(!1),[p,d]=a.useState(),i=a.useCallback(async()=>{e(!0),console.log("Fetching orders with params:",s);try{const t=await k(s);t.isSuccess&&t.data&&(u(t.data.content),d(t.data))}finally{e(!1)}},[s]),g=a.useCallback(t=>{n(l=>t.keyword!==void 0||t.status!==void 0||t.size!==void 0?{...l,...t,page:0}:{...l,...t})},[]),S=a.useCallback(async()=>{await i()},[i]);return a.useEffect(()=>{i()},[i]),{orders:c,loading:o,pageable:p,searchParams:s,setSearchParams:g,refresh:S}};export{C as a,P as u};
