import{j as e,r as u,t as d}from"./index-BNwsvz7n.js";import{d as b,O as D}from"./App-BYdKK9mZ.js";import{C as E}from"./clock-BS0TcSej.js";import{C as P}from"./circle-x-CQGsYib9.js";import{C as w}from"./circle-check-big-Dbj6ggGq.js";import{f as p}from"./string-msUNxrnf.js";import{c as I}from"./request-e3nKrsW6.js";import{L}from"./Loading-Bv0S8Ki5.js";import{a as A}from"./Pagination-CGtXNKMi.js";import{B as O}from"./Breadcrumb-otmzcjHB.js";import{a as R}from"./order-DUrJAXYj.js";import{S as V}from"./search-DlgcVxHE.js";import{X as $}from"./x-CFTovus6.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=b("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=b("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=b("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K=b("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]),T=({searchTerm:s,onClearSearch:t})=>e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-lg font-medium text-gray-900",children:"No orders found"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s?"Try adjusting your search or filter to find what you're looking for.":"You haven't placed any orders yet."}),s&&t&&e.jsx("button",{onClick:t,className:"mt-4 px-4 py-2 bg-white border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",children:"Clear Search"})]}),F=({count:s=3})=>e.jsx("div",{className:"space-y-4",children:Array.from({length:s}).map((t,l)=>e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 animate-pulse",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"h-4 bg-gray-300 rounded w-32 mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24"})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"h-5 bg-gray-300 rounded w-20"}),e.jsx("div",{className:"h-5 bg-gray-300 rounded w-16"}),e.jsx("div",{className:"h-8 bg-gray-300 rounded w-24"}),e.jsx("div",{className:"w-5 h-5 bg-gray-300 rounded-full"})]})]})},l))});var o=(s=>(s.NEW="NEW",s.CANCELLED="CANCELLED",s.PROCESSING="PROCESSING",s.PACKAGED="PACKAGED",s.PICKED="PICKED",s.SHIPPING="SHIPPING",s.DELIVERED="DELIVERED",s.REFUNDED="REFUNDED",s))(o||{});const y={[o.NEW]:{icon:e.jsx(E,{className:"w-4 h-4 mr-1"}),color:"text-purple-800",bgColor:"bg-purple-100",borderColor:"border-purple-200",text:"New"},[o.CANCELLED]:{icon:e.jsx(P,{className:"w-4 h-4 mr-1"}),color:"text-red-800",bgColor:"bg-red-100",borderColor:"border-red-200",text:"Cancelled"},[o.PROCESSING]:{icon:e.jsx(E,{className:"w-4 h-4 mr-1"}),color:"text-amber-800",bgColor:"bg-amber-100",borderColor:"border-amber-200",text:"Processing"},[o.PACKAGED]:{icon:e.jsx(C,{className:"w-4 h-4 mr-1"}),color:"text-blue-800",bgColor:"bg-blue-100",borderColor:"border-blue-200",text:"Packaged"},[o.PICKED]:{icon:e.jsx(w,{className:"w-4 h-4 mr-1"}),color:"text-indigo-800",bgColor:"bg-indigo-100",borderColor:"border-indigo-200",text:"Picked"},[o.SHIPPING]:{icon:e.jsx(K,{className:"w-4 h-4 mr-1"}),color:"text-cyan-800",bgColor:"bg-cyan-100",borderColor:"border-cyan-200",text:"Shipping"},[o.DELIVERED]:{icon:e.jsx(w,{className:"w-4 h-4 mr-1"}),color:"text-green-800",bgColor:"bg-green-100",borderColor:"border-green-200",text:"Delivered"},[o.REFUNDED]:{icon:e.jsx(w,{className:"w-4 h-4 mr-1"}),color:"text-rose-800",bgColor:"bg-rose-100",borderColor:"border-rose-200",text:"Refunded"}},k=({status:s})=>{const t=y[s];return e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${t.bgColor} ${t.color} ${t.borderColor}`,children:[t.icon,t.text]})},U="/order-details",M=async s=>(await I.get(`${U}/order/${s}`)).data,B=s=>{const[t,l]=u.useState(s),[m,i]=u.useState([]),[g,x]=u.useState(!1),h=u.useCallback(async n=>{const r=n||t;if(r){x(!0);try{const a=await M(r);return a.isSuccess&&i(a.data||[]),x(!1),a}catch{x(!1);return}}},[t]);return u.useEffect(()=>{t&&h()},[t,h]),{orderDetails:m,loading:g,fetchOrderDetails:h,setOrderId:l}},q=({order:s,onViewStatus:t})=>{const[l,m]=u.useState(!1),{orderDetails:i,loading:g,fetchOrderDetails:x}=B(),h=()=>{const n=!l;m(n),n&&x(s.id)};return e.jsxs("div",{className:"bg-white rounded-[15px] shadow-sm border border-gray-200 overflow-hidden transition-all duration-300 ease-in-out hover:shadow-md",style:{transform:"translateY(0)",opacity:1,animation:"fadeIn 0.5s ease-out"},children:[e.jsxs("div",{className:"p-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(C,{className:"w-5 h-5 text-gray-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:s.id}),e.jsxs("p",{className:"text-sm text-gray-500",children:[d("order.orderOn")," ",new Date(s.createdAt).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(k,{status:s.status}),e.jsx("span",{className:"font-medium text-gray-900",children:p(s.total,"VND")}),e.jsx("button",{onClick:()=>t(s),className:"px-3 py-1 text-sm bg-gray-100 hover:bg-gray-200 text-gray-800 rounded-[12px] transition-colors",children:d("order.viewStatus")}),e.jsx("button",{onClick:h,className:"text-gray-500 focus:outline-none",children:l?e.jsx(D,{className:"w-5 h-5 transition-transform duration-300"}):e.jsx(G,{className:"w-5 h-5 transition-transform duration-300"})})]})]}),e.jsx("div",{className:`border-t border-gray-200 overflow-hidden transition-all duration-300 ease-in-out ${l?"max-h-[1000px] opacity-100":"max-h-0 opacity-0"}`,children:e.jsxs("div",{className:"p-4 bg-gray-50",children:[g?e.jsx(L,{}):e.jsx("div",{className:"space-y-3",children:i.map(n=>{var r,a;return e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("img",{src:n.product.mainImageUrl,alt:n.product.name,className:"w-16 h-16 object-cover rounded-md"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:n.product.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(r=n.color)==null?void 0:r.name,", ",(a=n.size)==null?void 0:a.name]}),e.jsxs("p",{className:"text-sm",children:[p(n.unitPrice,"VND")," x"," ",n.quantity]})]})]}),e.jsx("div",{className:"font-medium",children:p(n.total,"VND")})]},n.id)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 flex justify-between",children:[e.jsx("div",{children:e.jsx("p",{className:"text-sm text-gray-500",children:d("order.total")})}),e.jsx("div",{className:"font-medium text-lg text-gray-900",children:p(s.total,"VND")})]})]})})]})},z=({order:s,onClose:t})=>{const l=u.useRef(null);if(u.useEffect(()=>{const r=a=>{l.current&&!l.current.contains(a.target)&&t()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t]),u.useEffect(()=>{const r=a=>{a.key==="Escape"&&t()};return document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",r)}},[t]),!s)return null;const m=[o.NEW,o.PROCESSING,o.PACKAGED,o.PICKED,o.SHIPPING,o.DELIVERED,o.CANCELLED,o.REFUNDED],i=[o.CANCELLED,o.REFUNDED],g=r=>s.orderTracks.some(a=>a.status===r),x=r=>s.status===r,h=r=>new Date(r).toLocaleString(),n=r=>s.orderTracks.find(a=>a.status===r);return e.jsx("div",{className:"fixed inset-0  bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 animate-fade-in",children:e.jsxs("div",{ref:l,className:"bg-white rounded-[12px] shadow-xl w-full max-w-3xl max-h-[90vh] overflow-y-auto",style:{animation:"scaleIn 0.3s ease-out forwards"},children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("h2",{className:"text-xl font-semibold text-gray-900",children:[d("order.orderStatus"),": ",s.id]}),e.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 focus:outline-none",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d("order.timeline")}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-7 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-8",children:m.map((r,a)=>{const f=n(r),j=g(r),N=x(r);return e.jsxs("div",{className:"relative flex items-start",children:[e.jsx("div",{className:`absolute left-7 top-7 h-full ${a===m.length-1?"hidden":""}`}),e.jsx("div",{className:`flex-shrink-0 h-14 w-14 rounded-full flex items-center justify-center border-2 ${j?`${y[r].bgColor} ${y[r].borderColor}`:"bg-white border-gray-200"} ${N?"ring-2 ring-offset-2 ring-gray-500":""}`,children:j?y[r].icon:e.jsx("span",{className:"text-gray-400",children:a+1})}),e.jsxs("div",{className:"ml-4 min-w-0 flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y[r].text}),f?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-sm text-gray-500",children:h(f.updatedTime)}),f.notes&&e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:f.notes})]}):e.jsx("div",{className:"text-sm text-gray-400",children:"Pending"})]})]},r)})})]})]}),i.some(r=>g(r))&&e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d("order.specialStatuses")}),e.jsx("div",{className:"space-y-4",children:i.map(r=>{const a=n(r);return a?e.jsxs("div",{className:"flex items-start p-3 rounded-[12px] bg-gray-50",children:[e.jsx("div",{className:`flex-shrink-0 h-10 w-10 rounded-full flex items-center justify-center ${y[r].bgColor}`,children:y[r].icon}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:y[r].text}),e.jsx("div",{className:"text-sm text-gray-500",children:h(a.updatedTime)}),a.notes&&e.jsx("div",{className:"mt-1 text-sm text-gray-600",children:a.notes})]})]},r):null})})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:d("order.orderSummary")}),e.jsx("div",{className:"bg-gray-50 rounded-[12px] p-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:d("order.orderDate")}),e.jsx("div",{className:"font-medium",children:new Date(s.createdAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:d("order.totalAmount")}),e.jsx("div",{className:"font-medium",children:p(s.total,"VND")})]}),e.jsx("div",{children:e.jsx("div",{className:"text-sm text-gray-500",children:d("order.items")})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:d("order.currentStatus")}),e.jsx("div",{className:"font-medium flex items-center mt-1",children:e.jsx(k,{status:s.status})})]})]})})]})]}),e.jsx("div",{className:"flex justify-end gap-3 p-4 border-t border-gray-200",children:e.jsx("button",{onClick:t,className:"px-4 py-2 bg-white border border-gray-300 rounded-[12px] text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:d("order.close")})})]})})},ne=()=>{const{orders:s,loading:t,pageable:l,searchParams:m,setSearchParams:i}=R({page:0,size:5,sort:["createdAt,desc"]}),[g,x]=u.useState(null),h=c=>{const v=c.target.value;i({keyword:v})},n=c=>{const v=c.target.value==="all"?void 0:c.target.value;i({status:v})},r=c=>{console.log("Changing page to:",c),i({page:c-1})},a=c=>{x(c)},f=()=>{x(null)},j=()=>{i({keyword:void 0,status:void 0})},N=((l==null?void 0:l.pageable.pageNumber)??0)+1,S=(l==null?void 0:l.totalPages)??1;return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-10",children:[e.jsx(O,{items:[{label:d("breadcrumb.home"),path:"/"},{label:d("breadcrumb.orders"),path:"/orders"}]}),e.jsx("div",{className:"mb-8",children:e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:d("order.title")})}),e.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(V,{className:"h-5 w-5 text-gray-400"})}),e.jsx("input",{type:"text",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-[12px] leading-5 bg-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 sm:text-sm transition duration-150 ease-in-out",placeholder:d("order.searchOrders"),value:m.keyword||"",onChange:h})]}),e.jsxs("div",{className:"relative inline-block w-full md:w-48 rounded-[12px]",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-gray-400"})}),e.jsxs("select",{className:"block w-full pl-10 pr-10 py-2 text-base border border-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-gray-900 sm:text-sm rounded-[12px] transition duration-150 ease-in-out appearance-none bg-white",value:m.status||"all",onChange:n,children:[e.jsx("option",{value:"all",children:d("order.allStatuses")}),Object.values(o).map(c=>e.jsx("option",{value:c,children:d(`order.status.${c}`)},c))]}),e.jsx("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none",children:e.jsx(D,{className:"h-5 w-5 text-gray-400"})})]})]}),e.jsx("div",{className:"space-y-4",children:t?e.jsx(F,{count:5}):s.length>0?s.map(c=>e.jsx(q,{order:c,onViewStatus:()=>a(c)},c.id)):e.jsx(T,{searchTerm:m.keyword||"",onClearSearch:j})}),!t&&s.length>0&&e.jsx(A,{currentPage:N,totalPages:S,onPageChange:r}),g&&e.jsx(z,{order:g,onClose:f})]})};export{ne as default};
