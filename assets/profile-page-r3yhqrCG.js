import{j as e,r as m}from"./index-CxKmREMg.js";import{d as j,C as H,B as p,a as r}from"./App-ml3lkzHZ.js";import{I as u}from"./InputField-Cm517BcO.js";import{u as M}from"./user-BIs3rADr.js";import"./request-BhcxZV3V.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=j("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=j("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),T=({showSavedMessage:t})=>e.jsx(e.Fragment,{children:e.jsx(H,{children:t&&e.jsx(p.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"absolute top-0 right-0 mt-4 mr-4 bg-green-100 text-green-800 px-4 py-2 rounded-lg shadow-md",children:"Profile saved successfully!"})})}),z=({previewImage:t,isEditing:a,onImageChange:i})=>{const l=m.useRef(null),s=()=>{a&&l.current&&l.current.click()};return e.jsxs("div",{className:"relative group cursor-pointer",onClick:s,children:[e.jsxs(p.div,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"h-32 w-32 sm:h-40 sm:w-40 rounded-full border-4 border-white overflow-hidden bg-white shadow-lg",children:[e.jsx("img",{src:t||"/placeholder.svg",alt:"Profile",className:"h-full w-full object-cover"}),a&&e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(U,{className:"h-8 w-8 text-white"})})]}),e.jsx("input",{type:"file",ref:l,onChange:i,accept:"image/*",className:"hidden",disabled:!a})]})},V=({formData:t,isEditing:a,isSaving:i,handleChange:l,handleSubmit:s,cancelEdit:c})=>e.jsxs("form",{onSubmit:s,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{id:"firstName",label:r("lbl.firstName"),name:"firstName",value:t.firstName,onChange:l,disabled:!a,className:a?"":"bg-gray-50 border-transparent"}),e.jsx(u,{id:"lastName",label:r("lbl.lastName"),name:"lastName",value:t.lastName,onChange:l,disabled:!a,className:a?"":"bg-gray-50 border-transparent"}),e.jsx(u,{id:"email",label:"Email",type:"email",name:"email",value:t.email,onChange:l,disabled:!0,className:"bg-gray-50 border-transparent"}),e.jsx(u,{id:"phone",label:r("lbl.phone"),type:"tel",name:"phoneNum",value:t.phoneNumber,onChange:l,disabled:!a,className:a?"":"bg-gray-50 border-transparent"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r("lbl.address")}),e.jsx("textarea",{name:"address",value:t.address,onChange:l,disabled:!a,rows:3,className:`w-full px-4 py-2 border rounded-[10px] ${a?"border-gray-300 bg-white":"border-transparent bg-gray-50"} rounded-lg focus:outline-none focus:ring-2 focus:ring-rose-500 transition-all duration-200`})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{id:"weight",label:r("lbl.weight"),name:"weight",value:t.weight,onChange:l,disabled:!a,placeholder:"e.g. 70 kg",className:a?"":"bg-gray-50 border-transparent"}),e.jsx(u,{id:"height",label:r("lbl.height"),name:"height",value:t.height,onChange:l,disabled:!a,placeholder:"e.g. 175 cm",className:a?"":"bg-gray-50 border-transparent"})]})]}),a&&e.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-8 flex justify-end",children:[e.jsx("button",{type:"button",onClick:c,className:"mr-4 px-6 py-3 bg-gray-200 text-gray-700 rounded-[12px] hover:bg-gray-300 transition-colors",children:r("lbl.cancel")}),e.jsx("button",{type:"submit",disabled:i,className:`flex items-center px-6 py-3 bg-rose-500 text-white rounded-[12px] hover:bg-rose-600 transition-colors ${i?"opacity-70 cursor-not-allowed":""}`,children:i?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r("lbl.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"h-5 w-5 mr-2"}),r("lbl.saveChanges")]})})]})]}),D=()=>{const{fetchUserByToken:t,user:a,updateUser:i,loading:l}=M(),[s,c]=m.useState(null),[g,b]=m.useState(!1),[w,x]=m.useState(null),[k,f]=m.useState(!1),[C,y]=m.useState(!1);m.useEffect(()=>{(async()=>{const n=await t();n&&(c(n),x(n.photo||null))})()},[]);const I=d=>{const{name:n,value:o}=d.target;c(h=>h?{...h,[n]:o}:null)},S=d=>{var o;const n=(o=d.target.files)==null?void 0:o[0];if(n){const h=new FileReader;h.onloadend=()=>{const v=h.result;x(v),c(N=>N?{...N,image:v}:null)},h.readAsDataURL(n)}},P=async d=>{if(d.preventDefault(),!s)return;f(!0);const n={firstName:s.firstName,lastName:s.lastName,phoneNumber:s.phoneNumber,address:s.address,height:s.height,weight:s.weight},o=await i(s.id,n);o&&(c(o),x(o.photo||null),b(!1),y(!0),setTimeout(()=>{y(!1)},3e3)),f(!1)},F=()=>{b(!1),a&&(c(a),x(a.photo||null))};return l||!s?e.jsx("div",{className:"h-screen w-full flex items-center justify-center bg-white",children:e.jsx("div",{className:"animate-pulse text-3xl font-bold",children:r("lbl.loading")})}):e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 mt-20",children:e.jsxs("div",{className:"bg-white overflow-hidden relative",children:[e.jsx(T,{showSavedMessage:C}),e.jsxs("div",{className:"px-4 sm:px-6 pb-6 relative mt-20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center sm:items-end -mt-16 sm:-mt-20 mb-6 sm:mb-8 relative",children:[e.jsx(z,{previewImage:w||"",isEditing:g,onImageChange:S}),e.jsxs("div",{className:"sm:mt-0 sm:ml-6 text-center sm:text-left mb-10",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:s.firstName+s.lastName}),e.jsx("p",{className:"text-gray-600",children:s.email})]}),e.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-auto",children:g?null:e.jsx(p.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!0),className:"px-4 py-2 bg-rose-500 text-white rounded-[12px] hover:bg-rose-600 transition-colors",children:r("lbl.editProfile")})})]}),e.jsx(V,{formData:s,isEditing:g,isSaving:k,handleChange:I,handleSubmit:P,cancelEdit:F})]})]})})};export{D as default};
