import{r as l,B as c,t as s,j as r}from"./index-CKvSTObc.js";import{u as j}from"./user-CY15E2bt.js";import{G as v}from"./Button-7LtvtsJ3.js";import{B as N}from"./Breadcrumb-BqEkN9-3.js";import{P as f}from"./PasswordInput-C7y-G4fT.js";import{E as y,aj as k}from"./App-BTqxky5P.js";import"./button-D6VK-Z1Q.js";const F=()=>{const n=y(),[P]=k(),d=P.get("token"),{resetPassword:p,loading:i}=j(),[e,h]=l.useState({newPassword:"",confirmPassword:"",token:d||""}),[t,w]=l.useState({newPassword:"",confirmPassword:""});l.useEffect(()=>{d||(c.error(s("error.commonError")),n("/request-password-reset"))},[d,n]);const u=a=>{const{name:o,value:g}=a.target;h(m=>({...m,[o]:g})),w(m=>({...m,[o]:""}))},x=()=>{let a=!0;const o={...t};return e.newPassword?e.newPassword.length<8&&(o.newPassword=s("error.passwordLength"),a=!1):(o.newPassword=s("error.passwordRequired"),a=!1),e.confirmPassword?e.newPassword!==e.confirmPassword&&(o.confirmPassword=s("error.passwordMismatch"),a=!1):(o.confirmPassword=s("error.confirmPasswordRequired"),a=!1),w(o),a},b=async a=>{if(a.preventDefault(),!x())return;await p({newPassword:e.newPassword,confirmPassword:e.confirmPassword,token:e.token})?(c.success(s("success.passwordChanged")),n("/login")):c.error(s("error.passwordUpdateFailed"))};return d?r.jsxs("div",{className:"mx-auto mt-10 px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx(N,{items:[{label:s("breadcrumb.home"),path:"/"},{label:s("breadcrumb.login"),path:"/login"},{label:s("breadcrumb.forgotPassword"),path:"/request-password-reset"},{label:s("breadcrumb.resetPassword"),path:"/reset-password"}]}),r.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:r.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:s("auth.resetPassword")})}),r.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:r.jsx("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:r.jsxs("form",{className:"space-y-6",onSubmit:b,children:[r.jsx("input",{type:"hidden",name:"token",value:e.token}),r.jsx(f,{id:"newPassword",name:"newPassword",label:s("auth.newPassword"),value:e.newPassword,onChange:u,placeholder:s("placeholder.newPassword"),className:t.newPassword?"border-red-300":"",required:!0}),t.newPassword&&r.jsx("p",{className:"-mt-4 mb-4 text-sm text-red-600",children:t.newPassword}),r.jsx(f,{id:"confirmPassword",name:"confirmPassword",label:s("auth.confirmPassword"),value:e.confirmPassword,onChange:u,placeholder:s("placeholder.confirmNewPassword"),className:t.confirmPassword?"border-red-300":"",required:!0}),t.confirmPassword&&r.jsx("p",{className:"-mt-4 mb-4 text-sm text-red-600",children:t.confirmPassword}),r.jsx("div",{children:r.jsx(v,{type:"submit",variant:"primary",className:"w-full rounded-[10px]",disabled:i,children:i?s("loading"):s("auth.resetPassword")})})]})})})]}):null};export{F as default};
