import{m as f,r as w}from"./index-G0QzuUAk.js";const v=async(e=0,a=10,n,l,o,r,i,c)=>{const s=new URLSearchParams;return s.append("page",e.toString()),s.append("size",a.toString()),n&&n.length&&n.forEach(d=>s.append("sort",d)),l&&s.append("keyword",l),o&&s.append("minRating",o.toString()),r&&s.append("maxRating",r.toString()),i&&s.append("orderDetailId",i),c&&s.append("productId",c),(await f.get(`/reviews?${s.toString()}`)).data},S=async e=>(await f.post("/reviews",e)).data,R=()=>{const[e,a]=w.useState({data:[],pageable:null,loading:!1,error:null}),n=async(l=0,o=10,r,i,c,s,g,d)=>{var p;a(t=>({...t,loading:!0,error:null}));try{const t=await v(l,o,r,i,c,s,g,d);return t.isSuccess?(a({data:(p=t==null?void 0:t.data)==null?void 0:p.content,pageable:t.data??null,loading:!1,error:null}),t.data):(a(u=>({...u,loading:!1,error:"Failed to fetch reviews"})),null)}catch(t){return a(u=>({...u,loading:!1,error:t instanceof Error?t.message:"An unknown error occurred"})),null}};return{reviews:e.data,pageable:e.pageable,loading:e.loading,error:e.error,fetchReviews:n}},b=()=>{const[e,a]=w.useState({loading:!1,error:null,success:!1,data:void 0});return{submitReview:async o=>{a({loading:!0,error:null,success:!1,data:void 0});try{const r=await S(o);return r.isSuccess&&r.data?(a({loading:!1,error:null,success:!0,data:r.data}),r.data):(a({loading:!1,error:"Failed to submit review",success:!1,data:void 0}),null)}catch(r){return a({loading:!1,error:r instanceof Error?r.message:"An unknown error occurred",success:!1,data:void 0}),null}},resetState:()=>{a({loading:!1,error:null,success:!1,data:void 0})},loading:e.loading,error:e.error,success:e.success,createdReview:e.data}};export{b as a,R as u};
