import{m as y,r as a}from"./index-D36DP4Cg.js";const f="/orders",S=async s=>(await y.post(`${f}/checkout`,s)).data,m=async s=>(await y.post("/vn-payment/create",s)).data,P=async s=>{const{keyword:e,status:o,page:u=0,size:i=10,sort:r}=s,t=new URLSearchParams;return e&&t.append("keyword",e),o&&t.append("status",o),t.append("page",u.toString()),t.append("size",i.toString()),r&&r.length>0&&r.forEach(d=>{t.append("sort",d)}),(await y.get(`${f}/search?${t.toString()}`)).data},w=async s=>(await y.post(`/vn-payment/retry/${s}`)).data,b=()=>{const[s,e]=a.useState(!1),[o,u]=a.useState(null);return{loading:s,orderResponse:o,performCheckout:async r=>{e(!0);try{const t=await S(r);return t.isSuccess&&t.data&&u(t.data),e(!1),t}catch{e(!1);return}}}},C=s=>{const[e,o]=a.useState(s||{page:0,size:10}),[u,i]=a.useState([]),[r,t]=a.useState(!1),[n,d]=a.useState(),l=a.useCallback(async()=>{t(!0),console.log("Fetching orders with params:",e);try{const c=await P(e);c.isSuccess&&c.data&&(i(c.data.content),d(c.data))}finally{t(!1)}},[e]),g=a.useCallback(c=>{o(p=>c.keyword!==void 0||c.status!==void 0||c.size!==void 0?{...p,...c,page:0}:{...p,...c})},[]),h=a.useCallback(async()=>{await l()},[l]);return a.useEffect(()=>{l()},[l]),{orders:u,loading:r,pageable:n,searchParams:e,setSearchParams:g,refresh:h}},L=()=>{const[s,e]=a.useState(!1),[o,u]=a.useState(null);return{loading:s,paymentUrl:o,createPayment:async(r,t=!0)=>{e(!0);try{const n=await m(r);return u(n),t&&n&&(window.location.href=n),n}finally{e(!1)}}}},U=()=>{const[s,e]=a.useState(!1),[o,u]=a.useState(null);return{loading:s,paymentUrl:o,retryPayment:async(r,t=!0)=>{e(!0);try{const n=await w(r);return u(n),t&&n&&(window.location.href=n),n}finally{e(!1)}}}};export{L as a,U as b,C as c,b as u};
